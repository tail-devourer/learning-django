{% extends "base.html" %}

{% block title %}
  Members - Tennis Club
{% endblock %}

{% block content %}
  {% include "topbar.html" %}
  <div class="flex flex-col items-center py-8 gap-y-8">
    <div class="text-4xl font-semibold">Members</div>
    <div class="w-full max-w-2xl px-8">
      <form method="get" action="{% url 'home' %}" class="flex gap-4 items-center">
        <div class="join flex-1">
          <input 
            type="text" 
            name="q" 
            value="{{ query|default:'' }}" 
            placeholder="Search by name or phone..." 
            class="input input-bordered join-item w-full focus:input-primary"
          >
          <button 
            type="submit" 
            class="btn btn-primary join-item"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
            Search
          </button>
        </div>
        {% if query %}
          <a 
            href="{% url 'home' %}" 
            class="btn btn-outline btn-error"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            Clear
          </a>
        {% endif %}
      </form>
    </div>
    {% if query %}
      <div class="alert alert-info shadow-lg max-w-2xl">
        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <div>
          <h3 class="font-bold">Search Results</h3>
          <div class="text-xs">Found {{ members.count }} member{{ members.count|pluralize }} for "{{ query }}"</div>
        </div>
      </div>
    {% endif %}
    <div class="flex flex-wrap justify-center gap-6 px-8 lg:px-24">
      {% for member in members %}
        <div class="card w-72 shadow-sm">
          <figure>
            <img src="{{ member.avatar.url }}" alt="{{ member.first_name }} {{ member.last_name }}" />
          </figure>
          <div class="card-body">
            <div class="card-title">
              {{ member.first_name }} {{ member.last_name }}
            </div>
            <div>
              {% load phone_filters %}
              <span class="font-semibold">Phone:</span> {{ member.phone|format_phone }}<br />
              <span class="font-semibold">Member since:</span> {{ member.joined_date }}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">Add Comment</button>
    </form>
    {% for comment in comments %}
    <div>
      <p>{{ comment.content }}</p>
      <small>{{ comment.created_at }}</small>
    </div>
    {% endfor %}
  </div>
{% endblock %}
